import{a as h,p as o}from"./chunk-OIYGIGL5-Cc9HuriF.js";const m=async({endpoint:t,method:e="GET",headers:s,body:n})=>{const i="https://restcountries.com/v3.1";try{const r=await fetch(i+t,{method:e,headers:s,body:n});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw r}};function $(){return{getAll:u,getPaginated:k,getInfiniteScrollPaginated:w,getTotalPages:L,getCountry:x,getCountryInfo:S}}async function u(){const t=localStorage.getItem("countries");if(t)return JSON.parse(t);const e=["name","flags","continents","population","capital","timezones","currencies","languages","cca2","latlng"].join(",");return await m({endpoint:`/all?fields=${e}`}).then(s=>(localStorage.setItem("countries",JSON.stringify(s)),s)).catch(s=>{throw console.error("Error fetching countries:",s),new Error(`Error fetching countries: ${s}`)})}async function k(t=1,e=12){return(await u()).slice((t-1)*e,t*e)}async function w(t=1,e=12){return(await u()).slice(0,t*e)}function L(t=12){const e=localStorage.getItem("countries");let s=[];return e&&(s=JSON.parse(e)),Math.ceil(s.length/t)}function x(t){const e=localStorage.getItem("countries");let s=[];return e&&(s=JSON.parse(e)),s.find(n=>n.cca2===t.toUpperCase())}async function S(t){const e=`https://en.wikipedia.org/w/rest.php/v1/page/${t}/html`;try{const s=await fetch(e);if(!s.ok)throw new Error(`Response status: ${s.status}`);const n=await s.text();return b(n)}catch(s){console.error(s.message)}}function b(t){const i=new DOMParser().parseFromString(t,"text/html").querySelector("section")?.querySelectorAll("p");return Array.from(i||[]).map(r=>r.textContent?.replace(/\[\w+\]/g,"")).filter(r=>r!==null&&r?.trim()!==""&&r!==`
`)}function C(){return{getAll:c,getInfiniteScrollPaginated:I,addToBucketList:g,setBucketList:l,removeFromBucketList:p,toggleFromBucketList:B,isCountryInBucketList:y,getTotalPages:j}}function c(){const t=localStorage.getItem("bucketList");return t?JSON.parse(t):[]}function I(t=1,e=12){return c().slice(0,t*e)}function l(t){localStorage.setItem("bucketList",JSON.stringify(t))}function g(t){const e=c();e.find(n=>n.cca2===t.cca2)||(e.push(t),l(e))}function p(t){const s=c().filter(n=>n.cca2!==t.cca2);l(s)}function B(t){c().find(n=>n.cca2===t.cca2)?p(t):g(t)}function y(t){const e=c();return e.length?e.some(s=>s?s.cca2===t.cca2:!1):!1}function j(t=12){const e=c();return Math.ceil(e.length/t)}function N({country:t,showLabel:e=!1,className:s}){const{toggleFromBucketList:n,isCountryInBucketList:i}=C(),[r,f]=h.useState(i(t)),d=a=>{n(a),i(a)?f(!0):f(!1)};return o.jsxs(o.Fragment,{children:[o.jsxs("label",{className:`btn btn-square btn-primary swap ${s}`,children:[o.jsx("input",{id:`add-to-bucketlist__btn-${t.cca2}`,type:"checkbox",checked:r,onChange:a=>{d(t)}}),o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2.5",stroke:"currentColor",className:"size-[1.2em] swap-off",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"crimson",viewBox:"0 0 24 24",strokeWidth:"2.5",stroke:"currentColor",className:"size-[1.2em] swap-on",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})})]}),e?o.jsxs("label",{htmlFor:`add-to-bucketlist__btn-${t.cca2}`,className:"ml-2 cursor-pointer select-none transition-opacity duration-150 hover:opacity-80",children:[r?"Remove from":"Add to"," Bucket List"]}):null]})}export{N as A,C as a,$ as u};
