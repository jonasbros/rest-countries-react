import{a as t,p as e,w as k}from"./chunk-OIYGIGL5-Cc9HuriF.js";import{a as S,A as I,u as h}from"./AddToBucketBtn-CO2KqOW1.js";import{I as B}from"./InfiniteScrollObserver-CYXGa9se.js";import{C as j,a as g}from"./CountryInfoList-blIKev0O.js";const i=t.createContext(null);function L(){const{getInfiniteScrollPaginated:s,getTotalPages:n}=S(),[c,l]=t.useState([]),[r,a]=t.useState(!1),[p,N]=t.useState(0),[u,C]=t.useState(1),d=t.useRef(u),x=t.useRef(null),{setSelectedCountry:w}=t.useContext(i);d.current=u;const f=async(o=u)=>{const b=await s(o);l(b)},y=()=>{if(d.current>=p&&r)return;a(!0);const o=d.current+1;f(o),C(o),a(!1)},v=o=>{w(o)};return t.useEffect(()=>{f()},[]),t.useEffect(()=>{N(n())},[]),e.jsx("div",{ref:x,className:"col-span-12 lg:col-span-4 overflow-y-auto pr-2 h-[600px] md:h-full",children:c.length===0?e.jsx("p",{className:"text-center italic mt-10 opacity-60",children:"Your bucket list is empty. Start adding countries!"}):e.jsxs(e.Fragment,{children:[e.jsxs("ul",{className:"list bg-base-100 rounded-box shadow-md",children:[c.map(o=>e.jsxs("li",{className:"list-row hover:bg-base-200 cursor-pointer",onClick:()=>v(o),children:[e.jsx("div",{children:e.jsx("img",{className:"h-10",src:o.flags.png})}),e.jsxs("div",{className:"truncate",children:[e.jsx("p",{children:o.name.common}),e.jsx("p",{className:"text-xs uppercase font-semibold opacity-60",children:o.name.official})]}),e.jsx(I,{country:o,className:"btn-soft"})]},o.cca2)),r&&e.jsxs("li",{className:"list-row",children:[e.jsx("div",{className:"h-10 w-14 skeleton"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"h-4 w-32 skeleton"}),e.jsx("div",{className:"h-4 w-64 skeleton"})]}),e.jsx("div",{className:"size-10 skeleton"})]})]}),e.jsx(B,{onLoadMore:y,options:{root:x.current,rootMargin:"0px",threshold:1}})]})})}function P(){const{selectedCountry:s}=t.useContext(i),{getCountryInfo:n}=h(),[c,l]=t.useState(null);return t.useEffect(()=>{if(!s)return;(async()=>{l(await n(s.name.common))})(),l(null)},[s]),e.jsx("div",{className:"col-span-8 pl-6 h-full",children:s?e.jsxs("div",{className:"grid grid-cols-2 grid-rows-2 items-start gap-8 h-full",children:[e.jsxs("div",{className:"row-span-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("img",{src:s.flags.svg,alt:`${s.name.common} flag`,className:"h-10"}),e.jsx("div",{children:e.jsx("h1",{className:"text-4xl font-bold",children:s.name.common})})]}),e.jsx(j,{country:s})]}),e.jsx(g,{cca2Code:s.cca2,className:"w-full lg:h-[300px] row-span-1"}),e.jsx("div",{className:"col-span-2 row-span-1 overflow-y-auto h-full",children:e.jsx("div",{className:"pr-4",children:c?c.map(r=>e.jsx("p",{className:"mb-4 text-justify",children:r},r)):e.jsx("p",{children:"Loading Country Info..."})})})]}):e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("p",{className:"italic -mt-10",children:"Select a country from the left."})})})}function E(){const{selectedCountry:s}=t.useContext(i),{getCountryInfo:n}=h(),[c,l]=t.useState(null),r=t.useRef(null);return t.useEffect(()=>{if(!s)return;(async()=>{l(await n(s.name.common))})(),l(null),r.current?.showModal()},[s]),s?e.jsxs("dialog",{ref:r,className:"modal",children:[e.jsxs("div",{className:"modal-box py-8",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"âœ•"})}),e.jsxs("div",{className:"flex flex-col items-start gap-4 h-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.flags.svg,alt:`${s.name.common} flag`,className:"h-10"}),e.jsx("div",{children:e.jsx("h1",{className:"text-2xl sm:text-4xl font-bold",children:s.name.common})})]}),e.jsx(j,{country:s}),e.jsx(g,{cca2Code:s.cca2,className:"w-full h-[300px]"}),c?c.map(a=>e.jsx("p",{className:"text-justify",children:a},a)):e.jsx("p",{children:"Loading Country Info..."})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{children:"close"})})]}):e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("p",{className:"italic -mt-10",children:"Select a country."})})}function m(s){const n={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};return s>=n["2xl"]?"2xl":s>=n.xl?"xl":s>=n.lg?"lg":s>=n.md?"md":s>=n.sm?"sm":"xs"}function M(){const[s,n]=t.useState(null),[c,l]=t.useState("md");return t.useEffect(()=>{if(!window)return;const r=window.innerWidth;return l(m(r)),window.addEventListener("resize",()=>{const a=window.innerWidth;l(m(a))}),()=>{window.removeEventListener("resize",()=>{const a=window.innerWidth;l(m(a))})}},[]),e.jsx(i.Provider,{value:{selectedCountry:s,setSelectedCountry:n},children:e.jsxs("section",{className:"container bg-base-300 p-6 rounded-2xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"My Bucket List"}),e.jsxs("div",{className:"grid grid-cols-12 grid-rows-1 gap-4 h-fit md:h-[600px]",children:[e.jsx(L,{}),c!=="sm"&&c!=="xs"&&c!=="md"?e.jsx(P,{}):e.jsx(E,{})]})]})})}function W({}){return[{title:"myBucket"},{name:"description",content:"Countries Bucket List!"}]}const $=k(function(){return e.jsx(M,{})});export{$ as default,W as meta};
