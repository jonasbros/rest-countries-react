import{a as n,p as e,L as p,w as b}from"./chunk-OIYGIGL5-Cc9HuriF.js";import{A as N,u as v}from"./AddToBucketBtn-CO2KqOW1.js";import{i as h,I as C}from"./InfiniteScrollObserver-CYXGa9se.js";function w({country:s}){const a=n.useRef(null),[l,r]=n.useState(!1),o=n.useCallback(()=>{r(!0)},[]),c=n.useCallback(()=>{r(!1)},[]);return n.useEffect(()=>{if(!a.current)return;const d=h(a.current,t=>{t.target.classList.toggle("animate-fade-in-scale-up",t.isIntersecting),t.isIntersecting&&d.observer.unobserve(t.target)}),m=h(a.current,t=>{if(t.isIntersecting)c();else{const x=t.boundingClientRect;Math.abs(x.top-window.innerHeight/2)>2e3&&o()}},{rootMargin:"2000px"});return()=>{d.cleanup(),m.cleanup()}},[]),e.jsxs("div",{ref:a,className:"country-card card bg-base-100 shadow-sm",children:[e.jsx("figure",{children:l?e.jsx("div",{className:"w-full h-[250px] bg-gray-200 2xl:h-[210px] lg:h-[250px]"}):e.jsx("img",{src:s.flags.png,alt:"Shoes",className:"w-full h-[250px] 2xl:h-[210px] lg:h-[250px] sm:h-[210px]"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:s.name.common}),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Capital:"})," ",s.capital.join(", ")]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Languages:"})," ",Object.values(s.languages).join(", ")]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Continent:"})," ",s.continents.join(", ")]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Timezones:"})," ",s.timezones.join(", ")]})]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Currencies:"})," ",Object.keys(s.currencies)[0]]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Population:"})," ",s.population.toLocaleString()]})]})]})}),e.jsxs("div",{className:"card-actions justify-end mt-auto",children:[e.jsx(N,{country:s}),e.jsx(p,{to:`/country/${s.cca2.toLowerCase()}`,className:"btn btn-primary",children:"More Info"})]})]})]})}function L(){return e.jsx(e.Fragment,{children:[...Array(8)].map((s,a)=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"skeleton h-32 w-full"}),e.jsx("div",{className:"skeleton h-4 w-28"}),e.jsx("div",{className:"skeleton h-4 w-full"}),e.jsx("div",{className:"skeleton h-4 w-full"})]},a))})}function k(){const{getInfiniteScrollPaginated:s,getTotalPages:a}=v(),[l,r]=n.useState([]),[o,c]=n.useState(!1),[d,m]=n.useState(0),[t,x]=n.useState(1),u=n.useRef(t);u.current=t;const g=async(i=t)=>{const j=await s(i);r(j)},f=()=>{if(u.current>=d&&o)return;c(!0);const i=u.current+1;g(i),x(i),c(!1)};return n.useEffect(()=>{g()},[]),n.useEffect(()=>{m(a())},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-8 2xl:grid-cols-4 xl:grid-cols-3 sm:grid-cols-2",children:[l.length>0?l.map(i=>e.jsx(w,{country:i},i.name.common)):null,l.length===0||o?e.jsx(L,{}):null]}),l.length>0?e.jsx(C,{onLoadMore:f}):null]})}function P(){return e.jsx("section",{className:"container bg-base-300 p-6 rounded-2xl",children:e.jsx(k,{})})}function O({}){return[{title:"myBucket"},{name:"description",content:"Countries Bucket List!"}]}const R=b(function(){return e.jsx(P,{})});export{R as default,O as meta};
